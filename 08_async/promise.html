<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function promise1 (flag) {
            return new Promise(function(resolve, rejcet){
                if(flag){
                    resolve(`promise상태는 fulfulled!!, then 으로 연경됩니다. \n 이때의 flag가 true입니다.`)
                } else {
                    rejcet(`promise상태는 rejected!! catch 로 연결됩니다. \n 이때의 flag는 false입니다.`)
                }
            })
        }
        promise1(true).then(function(result){
            console.log(result);
        }).catch(function(err){
            console.log(err)
        });

        //promise 사용
        function goMart(){
            console.log(`마트에 가서 어떤 음료를 살지 고민한다.`)
        }
        function pickDrink(){
            return new Promise ((resolve,rejcet)=>{
                setTimeout(()=>{
                    console.log(`고민끝!`)
                    product = `제로콜라`
                    price = 20000;
                    resolve();
                }, 2000)
            });
        }

        function pay(){
            console.log(`상품명 : ${product}, 가격 : ${price}`)
        }
        let product;
        let price

        // goMart();
        // pickDrink().then(pay);

        // async function exec(){
        //     goMart();
        //     await pickDrink();
        //     pay();
        // }
        // exec();

        function call (name) {
            return new Promise ((resolve,reject)=>{
                setTimeout(()=>{
                    console.log(name);
                    resolve(name);
                })
            })
        }
        function back (){
            return new Promise ((resolve,reject)=>{
                setTimeout(()=>{
                console.log(`back`);
                resolve(`back`)
            },1000)
            })
        }
        function hell(){
            return new Promise ((resolve,rejcet)=>{
                setTimeout(function(){
                resolve(`callback hell`)
            },1000)
            })
        }

        // call(`kim`).then((name)=>{
        //     console.log(name + `반가워`)
        //     return back()
        // }).then((txt)=>{
        //     console.log(txt +`를 실행했구나`)
        //     return hell();
        // }).then((message)=>{
        //     console.log(`여기는` + message)
        // })

        async function exec(){
            let name = await call("kim");
            console.log(`${name} 반가워`)
            let cb =await back(back);
            console.log(`${cb}을 실행했구나`)
            let clhell = await hell();
            console.log(`여기는 ${clhell}`)
        }

        exec();

    </script>
</body>
</html>